<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>stm32f411-adc: AnalogReaderDMA Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">stm32f411-adc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_analog_reader_d_m_a-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AnalogReaderDMA Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>fast ADC using the DMA. We have 8 channels available 10 PA0-WKUP ADC1_IN0 Channel 0 11 PA1 ADC1_IN1 Channel 1 13 PA3 ADC1_IN3 Channel 2 14 PA4 ADC1_IN4 Channel 3 15 PA5 ADC1_IN5 Channel 4 16 PA6 ADC1_IN6 Channel 5 17 PA7 ADC1_IN7 Channel 6 18 PB0 ADC1_IN8 Channe 7  
 <a href="class_analog_reader_d_m_a.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_analog_reader_d_m_a_8h_source.html">AnalogReaderDMA.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae148e8f20b3af9c0429a2664d6961789"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#ae148e8f20b3af9c0429a2664d6961789">AnalogReaderDMA</a> (int <a class="el" href="class_analog_reader_d_m_a.html#a04e5d7180f14f73bff278f652be38f93">channels</a>)</td></tr>
<tr class="memdesc:ae148e8f20b3af9c0429a2664d6961789"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new stm32 dma adc object w/o timer in ContinuousConvMode.  <a href="class_analog_reader_d_m_a.html#ae148e8f20b3af9c0429a2664d6961789">More...</a><br /></td></tr>
<tr class="separator:ae148e8f20b3af9c0429a2664d6961789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04cf4e7ea4d6e15f80eff5a75fa0981"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#ad04cf4e7ea4d6e15f80eff5a75fa0981">AnalogReaderDMA</a> (int <a class="el" href="class_analog_reader_d_m_a.html#a04e5d7180f14f73bff278f652be38f93">channels</a>, TIM_TypeDef *timerNum, int sampleRate, TcallbackADC adcCallback=nullptr, uint32_t bufferSize=0)</td></tr>
<tr class="memdesc:ad04cf4e7ea4d6e15f80eff5a75fa0981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new stm32 dma adc object with defined sample rate (using a timer)  <a href="class_analog_reader_d_m_a.html#ad04cf4e7ea4d6e15f80eff5a75fa0981">More...</a><br /></td></tr>
<tr class="separator:ad04cf4e7ea4d6e15f80eff5a75fa0981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f227f0392e335ad4d3a2c93edc067bb"><td class="memItemLeft" align="right" valign="top"><a id="a9f227f0392e335ad4d3a2c93edc067bb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a9f227f0392e335ad4d3a2c93edc067bb">~AnalogReaderDMA</a> ()</td></tr>
<tr class="memdesc:a9f227f0392e335ad4d3a2c93edc067bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a9f227f0392e335ad4d3a2c93edc067bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5afb44507bd875ded17423171999b53c"><td class="memItemLeft" align="right" valign="top"><a id="a5afb44507bd875ded17423171999b53c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a5afb44507bd875ded17423171999b53c">begin</a> ()</td></tr>
<tr class="memdesc:a5afb44507bd875ded17423171999b53c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the ADC Processing. <br /></td></tr>
<tr class="separator:a5afb44507bd875ded17423171999b53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24e479b887995956fa8b2d3b39eb41e"><td class="memItemLeft" align="right" valign="top"><a id="ac24e479b887995956fa8b2d3b39eb41e"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#ac24e479b887995956fa8b2d3b39eb41e">avg</a> (int ch)</td></tr>
<tr class="memdesc:ac24e479b887995956fa8b2d3b39eb41e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides the avg calculated over the initial samples for the indicated channel. Values are only available with normalization active: Call setCenterZero(true) before <a class="el" href="class_analog_reader_d_m_a.html#a5afb44507bd875ded17423171999b53c" title="Starts the ADC Processing.">begin()</a>! <br /></td></tr>
<tr class="separator:ac24e479b887995956fa8b2d3b39eb41e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50f7c11b243b363d8fe8102429a53fb4"><td class="memItemLeft" align="right" valign="top"><a id="a50f7c11b243b363d8fe8102429a53fb4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a50f7c11b243b363d8fe8102429a53fb4">isActive</a> ()</td></tr>
<tr class="memdesc:a50f7c11b243b363d8fe8102429a53fb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if it has been started <br  />
 <br /></td></tr>
<tr class="separator:a50f7c11b243b363d8fe8102429a53fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e5d7180f14f73bff278f652be38f93"><td class="memItemLeft" align="right" valign="top"><a id="a04e5d7180f14f73bff278f652be38f93"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a04e5d7180f14f73bff278f652be38f93">channels</a> ()</td></tr>
<tr class="memdesc:a04e5d7180f14f73bff278f652be38f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides the number of active channels. <br /></td></tr>
<tr class="separator:a04e5d7180f14f73bff278f652be38f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2b3475b8deee390770b882c53966c81"><td class="memItemLeft" align="right" valign="top"><a id="aa2b3475b8deee390770b882c53966c81"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#aa2b3475b8deee390770b882c53966c81">end</a> ()</td></tr>
<tr class="memdesc:aa2b3475b8deee390770b882c53966c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the ADC processing. <br /></td></tr>
<tr class="separator:aa2b3475b8deee390770b882c53966c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a645e8529220ea6e5403a925313051bab"><td class="memItemLeft" align="right" valign="top"><a id="a645e8529220ea6e5403a925313051bab"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a645e8529220ea6e5403a925313051bab">analogRead</a> (int in)</td></tr>
<tr class="memdesc:a645e8529220ea6e5403a925313051bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the actual ADC value for the indicated channel (0 - 7) or pin PA0 to PB0. <br /></td></tr>
<tr class="separator:a645e8529220ea6e5403a925313051bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4070bb84d9be1a9bb043086a8056045d"><td class="memItemLeft" align="right" valign="top"><a id="a4070bb84d9be1a9bb043086a8056045d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a4070bb84d9be1a9bb043086a8056045d">setRateCorrectionFactor</a> (float factor)</td></tr>
<tr class="memdesc:a4070bb84d9be1a9bb043086a8056045d"><td class="mdescLeft">&#160;</td><td class="mdescRight">We can correct the sampling rate if the effective data input does not match. <br /></td></tr>
<tr class="separator:a4070bb84d9be1a9bb043086a8056045d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac34477b1704568187f96a2b93ccc80eb"><td class="memItemLeft" align="right" valign="top"><a id="ac34477b1704568187f96a2b93ccc80eb"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#ac34477b1704568187f96a2b93ccc80eb">rateCorrectionFactor</a> ()</td></tr>
<tr class="memdesc:ac34477b1704568187f96a2b93ccc80eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actually defined correction factor which is applied to the sample rate. <br /></td></tr>
<tr class="separator:ac34477b1704568187f96a2b93ccc80eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6bd0360eaf7360e061a6f48547909e0"><td class="memItemLeft" align="right" valign="top"><a id="ac6bd0360eaf7360e061a6f48547909e0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#ac6bd0360eaf7360e061a6f48547909e0">setSamplingTime</a> (uint32_t st)</td></tr>
<tr class="memdesc:ac6bd0360eaf7360e061a6f48547909e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the sampling time e.g. ADC_SAMPLETIME_15CYCLES. <br /></td></tr>
<tr class="separator:ac6bd0360eaf7360e061a6f48547909e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8b648ef0dc347870cb4bf9a2cd3a7f"><td class="memItemLeft" align="right" valign="top"><a id="a3e8b648ef0dc347870cb4bf9a2cd3a7f"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a3e8b648ef0dc347870cb4bf9a2cd3a7f">samplingTime</a> ()</td></tr>
<tr class="memdesc:a3e8b648ef0dc347870cb4bf9a2cd3a7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides the actually defined sampleing time. <br /></td></tr>
<tr class="separator:a3e8b648ef0dc347870cb4bf9a2cd3a7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94acd8572612e8dd8cd368c19b801835"><td class="memItemLeft" align="right" valign="top"><a id="a94acd8572612e8dd8cd368c19b801835"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a94acd8572612e8dd8cd368c19b801835">setCenterZero</a> (bool active)</td></tr>
<tr class="memdesc:a94acd8572612e8dd8cd368c19b801835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio data is usually centered at 0 with negative and positive values: activate value normalization by setting active to true! <br /></td></tr>
<tr class="separator:a94acd8572612e8dd8cd368c19b801835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f5dd3d97136ddcc81a08815b96b0522"><td class="memItemLeft" align="right" valign="top"><a id="a9f5dd3d97136ddcc81a08815b96b0522"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a9f5dd3d97136ddcc81a08815b96b0522">isCenterZero</a> ()</td></tr>
<tr class="memdesc:a9f5dd3d97136ddcc81a08815b96b0522"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the values are normlized around 0. <br /></td></tr>
<tr class="separator:a9f5dd3d97136ddcc81a08815b96b0522"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5424cf9fc29184ed9a1742cca5a50082"><td class="memItemLeft" align="right" valign="top"><a id="a5424cf9fc29184ed9a1742cca5a50082"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a5424cf9fc29184ed9a1742cca5a50082">getBufferSize</a> (int bufferSize)</td></tr>
<tr class="memdesc:a5424cf9fc29184ed9a1742cca5a50082"><td class="mdescLeft">&#160;</td><td class="mdescRight">determines the "correct" buffer size based on the requested size <br /></td></tr>
<tr class="separator:a5424cf9fc29184ed9a1742cca5a50082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5369a65fabf665fcebbd310a839ab189"><td class="memItemLeft" align="right" valign="top"><a id="a5369a65fabf665fcebbd310a839ab189"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a5369a65fabf665fcebbd310a839ab189">getChannelForPin</a> (int pin)</td></tr>
<tr class="memdesc:a5369a65fabf665fcebbd310a839ab189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the channel for the indicated pin <br  />
 <br /></td></tr>
<tr class="separator:a5369a65fabf665fcebbd310a839ab189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af193d67211a1d7a7433b94a614dbf74c"><td class="memItemLeft" align="right" valign="top"><a id="af193d67211a1d7a7433b94a614dbf74c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>addHandlers</b> ()</td></tr>
<tr class="separator:af193d67211a1d7a7433b94a614dbf74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68603ed3c19ca001897d90bfd9055a90"><td class="memItemLeft" align="right" valign="top"><a id="a68603ed3c19ca001897d90bfd9055a90"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>removeHandlers</b> ()</td></tr>
<tr class="separator:a68603ed3c19ca001897d90bfd9055a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e8523808401352c033760e993b34271"><td class="memItemLeft" align="right" valign="top"><a id="a8e8523808401352c033760e993b34271"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a8e8523808401352c033760e993b34271">MX_ADC1_Init</a> (void)</td></tr>
<tr class="memdesc:a8e8523808401352c033760e993b34271"><td class="mdescLeft">&#160;</td><td class="mdescRight">ADC1 Initialization Function. <br /></td></tr>
<tr class="separator:a8e8523808401352c033760e993b34271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544124cdf1914638714e0fa11d13cb0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a544124cdf1914638714e0fa11d13cb0d">MX_DMA_Init</a> (void)</td></tr>
<tr class="separator:a544124cdf1914638714e0fa11d13cb0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08dbd531790afba1c3307d3950fcdd73"><td class="memItemLeft" align="right" valign="top"><a id="a08dbd531790afba1c3307d3950fcdd73"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#a08dbd531790afba1c3307d3950fcdd73">MX_GPIO_Init</a> (void)</td></tr>
<tr class="memdesc:a08dbd531790afba1c3307d3950fcdd73"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Initialization Function. <br /></td></tr>
<tr class="separator:a08dbd531790afba1c3307d3950fcdd73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ad5a94d127e6944414af531152a0f5"><td class="memItemLeft" align="right" valign="top"><a id="aa7ad5a94d127e6944414af531152a0f5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#aa7ad5a94d127e6944414af531152a0f5">HAL_ADC_ConvCpltCallback</a> (ADC_HandleTypeDef *hadc)</td></tr>
<tr class="memdesc:aa7ad5a94d127e6944414af531152a0f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA Callback. <br /></td></tr>
<tr class="separator:aa7ad5a94d127e6944414af531152a0f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4115cadff4becb94696459fe02c689d"><td class="memItemLeft" align="right" valign="top"><a id="af4115cadff4becb94696459fe02c689d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#af4115cadff4becb94696459fe02c689d">HAL_ADC_ConvHalfCpltCallback</a> (ADC_HandleTypeDef *hadc)</td></tr>
<tr class="memdesc:af4115cadff4becb94696459fe02c689d"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA Callback. <br /></td></tr>
<tr class="separator:af4115cadff4becb94696459fe02c689d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af41e22d19b8f0464b4aa464038adb48e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#af41e22d19b8f0464b4aa464038adb48e">HAL_ADC_MspInit</a> (ADC_HandleTypeDef *hadc)</td></tr>
<tr class="memdesc:af41e22d19b8f0464b4aa464038adb48e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ADC MSP Initialization This function configures the hardware resources used in this example.  <a href="class_analog_reader_d_m_a.html#af41e22d19b8f0464b4aa464038adb48e">More...</a><br /></td></tr>
<tr class="separator:af41e22d19b8f0464b4aa464038adb48e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3bd1322f6ec66271331eb371d141c55"><td class="memItemLeft" align="right" valign="top"><a id="af3bd1322f6ec66271331eb371d141c55"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_analog_reader_d_m_a.html#af3bd1322f6ec66271331eb371d141c55">HAL_ADC_MspDeInit</a> (ADC_HandleTypeDef *hadc)</td></tr>
<tr class="memdesc:af3bd1322f6ec66271331eb371d141c55"><td class="mdescLeft">&#160;</td><td class="mdescRight">ADC MSP De-Initialization This function freeze the hardware resources used in this example. <br /></td></tr>
<tr class="separator:af3bd1322f6ec66271331eb371d141c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4d179d181f6223905fea789a4f097cc"><td class="memItemLeft" align="right" valign="top"><a id="af4d179d181f6223905fea789a4f097cc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>DMA2_Stream0_IRQHandler</b> (void)</td></tr>
<tr class="separator:af4d179d181f6223905fea789a4f097cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29617afef852d3821668ca3d66684c4c"><td class="memItemLeft" align="right" valign="top"><a id="a29617afef852d3821668ca3d66684c4c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>STM32_LOG</b> (ErrorLevelSTM32 level, const char *fmt,...)</td></tr>
<tr class="separator:a29617afef852d3821668ca3d66684c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e2f13c7813ec8cd2cbfe467e563d98"><td class="memItemLeft" align="right" valign="top"><a id="a73e2f13c7813ec8cd2cbfe467e563d98"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Error_Handler</b> (void)</td></tr>
<tr class="separator:a73e2f13c7813ec8cd2cbfe467e563d98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa71dd2c1b3166a900b63abe06beb0eba"><td class="memItemLeft" align="right" valign="top"><a id="aa71dd2c1b3166a900b63abe06beb0eba"></a>
HardwareTimer *&#160;</td><td class="memItemRight" valign="bottom"><b>p_timer</b> =nullptr</td></tr>
<tr class="separator:aa71dd2c1b3166a900b63abe06beb0eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac363455d31f28aa568342fd932a7dc49"><td class="memItemLeft" align="right" valign="top"><a id="ac363455d31f28aa568342fd932a7dc49"></a>
TIM_TypeDef *&#160;</td><td class="memItemRight" valign="bottom"><b>timer_num</b></td></tr>
<tr class="separator:ac363455d31f28aa568342fd932a7dc49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b1b30c84c3840f64162be03484aba9"><td class="memItemLeft" align="right" valign="top"><a id="af7b1b30c84c3840f64162be03484aba9"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>correction_factor</b> = 1.0</td></tr>
<tr class="separator:af7b1b30c84c3840f64162be03484aba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e404a730d6b3ccfce634c25585a5b6"><td class="memItemLeft" align="right" valign="top"><a id="a61e404a730d6b3ccfce634c25585a5b6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_active</b> = false</td></tr>
<tr class="separator:a61e404a730d6b3ccfce634c25585a5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a171ffe91fd565b97a413315ecedc06d2"><td class="memItemLeft" align="right" valign="top"><a id="a171ffe91fd565b97a413315ecedc06d2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_center_zero</b> = false</td></tr>
<tr class="separator:a171ffe91fd565b97a413315ecedc06d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3457cd94462f22c3d0d3b7b6330c9365"><td class="memItemLeft" align="right" valign="top"><a id="a3457cd94462f22c3d0d3b7b6330c9365"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_center_zero_in_progress</b></td></tr>
<tr class="separator:a3457cd94462f22c3d0d3b7b6330c9365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e47c40b49462dbb31e1f9c3e4164d7"><td class="memItemLeft" align="right" valign="top"><a id="a34e47c40b49462dbb31e1f9c3e4164d7"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_continuous_conv_mode</b></td></tr>
<tr class="separator:a34e47c40b49462dbb31e1f9c3e4164d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae46fbc6339c1f3a7733a26020b98d14f"><td class="memItemLeft" align="right" valign="top"><a id="ae46fbc6339c1f3a7733a26020b98d14f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>channel_cnt</b> =0</td></tr>
<tr class="separator:ae46fbc6339c1f3a7733a26020b98d14f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdba7107edc193df3f7550eb2f3f384d"><td class="memItemLeft" align="right" valign="top"><a id="afdba7107edc193df3f7550eb2f3f384d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sample_rate</b> =0</td></tr>
<tr class="separator:afdba7107edc193df3f7550eb2f3f384d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52485bf2a762e184b62ffd2d6a1ba25c"><td class="memItemLeft" align="right" valign="top"><a id="a52485bf2a762e184b62ffd2d6a1ba25c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lastFrameStartIdx</b> =0</td></tr>
<tr class="separator:a52485bf2a762e184b62ffd2d6a1ba25c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a540c702f5c5772c204bf7172ed2e46c0"><td class="memItemLeft" align="right" valign="top"><a id="a540c702f5c5772c204bf7172ed2e46c0"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>sampling_time</b> = ADC_SAMPLETIME_28CYCLES</td></tr>
<tr class="separator:a540c702f5c5772c204bf7172ed2e46c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905d51f7b7ac8f779eaa1cea7e822ee1"><td class="memItemLeft" align="right" valign="top"><a id="a905d51f7b7ac8f779eaa1cea7e822ee1"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>adc_buffer</b> = nullptr</td></tr>
<tr class="separator:a905d51f7b7ac8f779eaa1cea7e822ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a09033698d8dfd650caa1e456077c7"><td class="memItemLeft" align="right" valign="top"><a id="a72a09033698d8dfd650caa1e456077c7"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>adc_buffer_size</b> = 0</td></tr>
<tr class="separator:a72a09033698d8dfd650caa1e456077c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfa89184a03d9ecb78cdc833e5d8c1da"><td class="memItemLeft" align="right" valign="top"><a id="acfa89184a03d9ecb78cdc833e5d8c1da"></a>
volatile int16_t *&#160;</td><td class="memItemRight" valign="bottom"><b>adc_result</b> = nullptr</td></tr>
<tr class="separator:acfa89184a03d9ecb78cdc833e5d8c1da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffbeecf7637dfbe1cf77abc11779ab1"><td class="memItemLeft" align="right" valign="top"><a id="aaffbeecf7637dfbe1cf77abc11779ab1"></a>
ADC_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><b>hadc1</b></td></tr>
<tr class="separator:aaffbeecf7637dfbe1cf77abc11779ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9bd07b409ea187fb57c2ef9d0984bfb"><td class="memItemLeft" align="right" valign="top"><a id="ac9bd07b409ea187fb57c2ef9d0984bfb"></a>
DMA_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><b>hdma_adc1</b></td></tr>
<tr class="separator:ac9bd07b409ea187fb57c2ef9d0984bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b077aa489f6e844005903145e06969f"><td class="memItemLeft" align="right" valign="top"><a id="a5b077aa489f6e844005903145e06969f"></a>
TcallbackADC&#160;</td><td class="memItemRight" valign="bottom"><b>adc_callback</b> = nullptr</td></tr>
<tr class="separator:a5b077aa489f6e844005903145e06969f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08403cd061a469eb4c421ffb1c7852ba"><td class="memItemLeft" align="right" valign="top"><a id="a08403cd061a469eb4c421ffb1c7852ba"></a>
ADCAverageCalculator *&#160;</td><td class="memItemRight" valign="bottom"><b>p_avg</b> = nullptr</td></tr>
<tr class="separator:a08403cd061a469eb4c421ffb1c7852ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e017709d37bd8396b8356c328558d3"><td class="memItemLeft" align="right" valign="top"><a id="a92e017709d37bd8396b8356c328558d3"></a>
const std::function&lt; void(ADC_HandleTypeDef *)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>f_HAL_ADC_MspInit</b> =std::bind(&amp;<a class="el" href="class_analog_reader_d_m_a.html#af41e22d19b8f0464b4aa464038adb48e">AnalogReaderDMA::HAL_ADC_MspInit</a>, this, std::placeholders::_1)</td></tr>
<tr class="separator:a92e017709d37bd8396b8356c328558d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b612f50fbc737467d702e8753192c82"><td class="memItemLeft" align="right" valign="top"><a id="a6b612f50fbc737467d702e8753192c82"></a>
const std::function&lt; void(ADC_HandleTypeDef *)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>f_HAL_ADC_MspDeInit</b> =std::bind(&amp;<a class="el" href="class_analog_reader_d_m_a.html#af3bd1322f6ec66271331eb371d141c55">AnalogReaderDMA::HAL_ADC_MspDeInit</a>, this, std::placeholders::_1)</td></tr>
<tr class="separator:a6b612f50fbc737467d702e8753192c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1c03f3f08f4fb42c820664670655a72"><td class="memItemLeft" align="right" valign="top"><a id="ae1c03f3f08f4fb42c820664670655a72"></a>
const std::function&lt; void(ADC_HandleTypeDef *)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>f_HAL_ADC_ConvCpltCallback</b> =std::bind(&amp;<a class="el" href="class_analog_reader_d_m_a.html#aa7ad5a94d127e6944414af531152a0f5">AnalogReaderDMA::HAL_ADC_ConvCpltCallback</a>, this, std::placeholders::_1)</td></tr>
<tr class="separator:ae1c03f3f08f4fb42c820664670655a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac88f9b80c1e8d301ae3be89bcce47506"><td class="memItemLeft" align="right" valign="top"><a id="ac88f9b80c1e8d301ae3be89bcce47506"></a>
const std::function&lt; void(ADC_HandleTypeDef *)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>f_HAL_ADC_ConvHalfCpltCallback</b> =std::bind(&amp;<a class="el" href="class_analog_reader_d_m_a.html#af4115cadff4becb94696459fe02c689d">AnalogReaderDMA::HAL_ADC_ConvHalfCpltCallback</a>, this, std::placeholders::_1)</td></tr>
<tr class="separator:ac88f9b80c1e8d301ae3be89bcce47506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22947b90838fd0847692d1d3f88b47d7"><td class="memItemLeft" align="right" valign="top"><a id="a22947b90838fd0847692d1d3f88b47d7"></a>
const std::function&lt; void()&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>f_DMA2_Stream0_IRQHandler</b> =std::bind(&amp;AnalogReaderDMA::DMA2_Stream0_IRQHandler, this)</td></tr>
<tr class="separator:a22947b90838fd0847692d1d3f88b47d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>fast ADC using the DMA. We have 8 channels available 10 PA0-WKUP ADC1_IN0 Channel 0 11 PA1 ADC1_IN1 Channel 1 13 PA3 ADC1_IN3 Channel 2 14 PA4 ADC1_IN4 Channel 3 15 PA5 ADC1_IN5 Channel 4 16 PA6 ADC1_IN6 Channel 5 17 PA7 ADC1_IN7 Channel 6 18 PB0 ADC1_IN8 Channe 7 </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae148e8f20b3af9c0429a2664d6961789"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae148e8f20b3af9c0429a2664d6961789">&#9670;&nbsp;</a></span>AnalogReaderDMA() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AnalogReaderDMA::AnalogReaderDMA </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channels</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new stm32 dma adc object w/o timer in ContinuousConvMode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channels</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad04cf4e7ea4d6e15f80eff5a75fa0981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad04cf4e7ea4d6e15f80eff5a75fa0981">&#9670;&nbsp;</a></span>AnalogReaderDMA() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AnalogReaderDMA::AnalogReaderDMA </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TIM_TypeDef *&#160;</td>
          <td class="paramname"><em>timerNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sampleRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TcallbackADC&#160;</td>
          <td class="paramname"><em>adcCallback</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bufferSize</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new stm32 dma adc object with defined sample rate (using a timer) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timerNum</td><td></td></tr>
    <tr><td class="paramname">sampleRate</td><td></td></tr>
    <tr><td class="paramname">bufferSize</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af41e22d19b8f0464b4aa464038adb48e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af41e22d19b8f0464b4aa464038adb48e">&#9670;&nbsp;</a></span>HAL_ADC_MspInit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AnalogReaderDMA::HAL_ADC_MspInit </td>
          <td>(</td>
          <td class="paramtype">ADC_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>hadc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ADC MSP Initialization This function configures the hardware resources used in this example. </p>
<p>ADC1 GPIO Configuration PA0 ---&mdash;&gt; ADC1_IN0 PA1 ---&mdash;&gt; ADC1_IN1 PA3 ---&mdash;&gt; ADC1_IN3 PA4 ---&mdash;&gt; ADC1_IN4 PA5 ---&mdash;&gt; ADC1_IN5 PA6 ---&mdash;&gt; ADC1_IN6 PA7 ---&mdash;&gt; ADC1_IN7 PB0 ---&mdash;&gt; ADC1_IN8</p>

</div>
</div>
<a id="a544124cdf1914638714e0fa11d13cb0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a544124cdf1914638714e0fa11d13cb0d">&#9670;&nbsp;</a></span>MX_DMA_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AnalogReaderDMA::MX_DMA_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Enable DMA controller clock </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="_analog_reader_d_m_a_8h_source.html">AnalogReaderDMA.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
